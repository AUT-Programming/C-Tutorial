ما در بیشتر اوقات برای برنامه ی خود نیازمند ذخیره ی داده های ورودی یا خروجی هستیم. پس ساختمان داده های مختلف با مفاهیم و الگوریتم های مختلف در طول زمان ساخته شدند که هرکدام برای برطرف کردن نیاز های به خصوصی طراحی شدند. یکی از این ساختمان داده ها، آرایه است.

## تعریف آرایه
آرایه  تعدادی خانه های متوالی حافظه است که این تعداد ثابت است و قابل تغییر نیست و المان های آن همگی از یک نوع (مثل int یا char) هستند.

نمونه ساخت آرایه در C:
```c
int arr[n];
``` 
عدد طبیعی n، سایز آرایه را نشان می دهد.
نوع `int`، نوع المان های داخل آن را نمایش می دهد.
و `arr` نام آن است که دلخواه است و بهتر است مفهومی انتخاب شود.


| ![Lightbox](https://media.geeksforgeeks.org/wp-content/uploads/20230302091959/Arrays-in-C.png) |
|:--------:|
| *نمونه مثالی از شکل انتزاعی آرایه در حافظه* |


----------

در ادامه به موضوعات مختلف درمورد آرایه می پردازیم.

##  اعلان و مقداردهی اولیه به آرایه

می‌توانید آرایه را هنگام اعلان مقداردهی اولیه کنید:
```c
int numbers[5] = {10, 20, 30, 40, 50};
``` 
اگر اندازه آرایه مشخص نباشد، کامپایلر به طور خودکار اندازه‌ی مناسب را تعیین می‌کند:

```c
int numbers[] = {10, 20, 30, 40, 50};
``` 


----------


## پاس دادن آرایه به تابع

در زبان C، وقتی یک آرایه را به یک تابع پاس می‌دهید، در واقع آدرس اولین عنصر آرایه (پونتر) به تابع ارسال می‌شود. بنابراین، تغییرات در داخل تابع بر روی آرایه‌ی اصلی تأثیر می‌گذارد.

## سینتکس پاس دادن آرایه به تابع

```c
void functionName(dataType arrayName[], int size);
``` 

یا 
```c
void functionName(dataType *arrayName, int size);
``` 

مثال:

```c
#include <stdio.h>

// تابعی که آرایه‌ای از اعداد صحیح را چاپ می‌کند
void printArray(int arr[], int size) {
    for(int i = 0; i < size; i++) {
        printf("Element at index %d: %d\n", i, arr[i]);
    }
}

int main() {
    int numbers[] = {10, 20, 30, 40, 50};
    int size = sizeof(numbers)/sizeof(numbers[0]);

    // پاس دادن آرایه به تابع
    printArray(numbers, size);

    return 0;
}
```
خروجی نمونه :

```
Element at index 0: 10
Element at index 1: 20
Element at index 2: 30
Element at index 3: 40
Element at index 4: 50

```


----------

##  بازگرداندن آرایه از تابع

در زبان C، توابع نمی‌توانند به طور مستقیم آرایه‌ها را بازگردانند. اما می‌توان از چند روش دیگر برای بازگرداندن آرایه استفاده کرد:

## استفاده از پوینتر(باید مبحث پوینتر را بدانید):
می‌توانید حافظه را به صورت دینامیک با استفاده از `malloc` تخصیص دهید و آدرس آن را بازگردانید.

مثال:

```c
#include <stdio.h>
#include <stdlib.h>

// تابعی که یک آرایه از اعداد صحیح را ایجاد و بازمی‌گرداند
int* createArray(int size) {
    int *arr = (int*)malloc(size * sizeof(int));
    if(arr == NULL) {
        printf("Memory allocation failed.\n");
        exit(1);
    }
    for(int i = 0; i < size; i++) {
        arr[i] = i * 10;
    }
    return arr;
}

int main() {
    int size = 5;
    int *myArray = createArray(size);
    
    // چاپ آرایه
    for(int i = 0; i < size; i++) {
        printf("Element at index %d: %d\n", i, myArray[i]);
    }
    
    // آزادسازی حافظه
    free(myArray);
    
    return 0;
}

```

##  استفاده از آرایه‌های سراسری یا آرایه‌های خارجی

می‌توانید آرایه‌ای را به عنوان یک متغیر سراسری یا خارجی تعریف کرده و از داخل تابع به آن دسترسی پیدا کنید. اما این روش معمولاً توصیه نمی‌شود به دلیل مشکلات مرتبط با قابلیت نگهداری کد.


----------

##  آرایه‌های با طول متغیر (Variable Length Arrays - VLA)

آرایه‌های با طول متغیر به شما اجازه می‌دهند تا طول آرایه را در زمان اجرا تعیین کنید، برخلاف آرایه‌های معمول که طول آن‌ها در زمان کامپایل مشخص است. این ویژگی از استاندارد C99 معرفی شده است.

## اعلان آرایه با طول متغیر

```c
#include <stdio.h>

int main() {
    int size;
    printf("Enter the size of the array: ");
    scanf("%d", &size);
    
    // اعلان آرایه با طول متغیر
    int numbers[size];
    
    // مقداردهی آرایه
    for(int i = 0; i < size; i++) {
        numbers[i] = i * 10;
    }
    
    // چاپ آرایه
    for(int i = 0; i < size; i++) {
        printf("Element at index %d: %d\n", i, numbers[i]);
    }
    
    return 0;
}

```

## محدودیت‌های آرایه‌های با طول متغیر
+ **پشتیبانی توسط کامپایلر:** برخی از کامپایلرها ممکن است از VLA پشتیبانی نکنند، به خصوص کامپایلرهای جدید که ممکن است استاندارد C11 یا جدیدتر را پیاده‌سازی کنند و پشتیبانی از VLA را اختیاری کنند.
+ **استفاده از حافظه پشته:** VLA‌ها در حافظه‌ی پشته (stack) قرار می‌گیرند، بنابراین استفاده‌ی زیاد از آن‌ها ممکن است منجر به سرریز پشته شود.


----------

## آرایه‌های چند‌بعدی (Multi-dimensional Arrays)

آرایه‌های چند‌بعدی به شما امکان می‌دهند تا داده‌ها را در ساختارهای جدول‌بندی شده مانند ماتریس‌ها ذخیره کنید.

مثال: آرایه دو بعدی

```c
#include <stdio.h>

int main() {
    // اعلان و مقداردهی اولیه به یک آرایه دو‌بعدی
    int matrix[3][3] = {
        {1, 2, 3},
        {4, 5, 6},
        {7, 8, 9}
    };
    
    // چاپ عناصر آرایه دو‌بعدی
    for(int i = 0; i < 3; i++) {
        for(int j = 0; j < 3; j++) {
            printf("%d ", matrix[i][j]);
        }
        printf("\n");
    }
    
    return 0;
}

```
خروجی نمونه :

```
1 2 3
4 5 6
7 8 9

```

## پاس دادن آرایه چند‌بعدی به تابع

هنگام پاس دادن آرایه‌های چند‌بعدی به تابع، باید ابعاد بعدی آن‌ها مشخص شده باشند.

مثال:

```c
#include <stdio.h>

// تابعی که آرایه دو‌بعدی را چاپ می‌کند
void printMatrix(int rows, int cols, int matrix[][cols]) {
    for(int i = 0; i < rows; i++) {
        for(int j = 0; j < cols; j++) {
            printf("%d ", matrix[i][j]);
        }
        printf("\n");
    }
}

int main() {
    int matrix[2][3] = {
        {1, 2, 3},
        {4, 5, 6}
    };
    
    printMatrix(2, 3, matrix);
    
    return 0;
}

```

خروجی نمونه:

```
1 2 3
4 5 6

```


----------

آرایه‌ها در زبان C ابزار قدرتمندی برای مدیریت مجموعه‌ای از داده‌ها هستند. با درک نحوه‌ی اعلان، مقداردهی، دسترسی، و پاس دادن آرایه‌ها به توابع، می‌توانید برنامه‌های پیچیده‌تر و کارآمدتری بنویسید. همچنین، استفاده از آرایه‌های با طول متغیر (VLA) و آرایه‌های چند‌بعدی می‌تواند به انعطاف‌پذیری بیشتر در طراحی برنامه‌های شما کمک کند. با این حال، باید از محدودیت‌ها و نکات مربوط به هر نوع آرایه آگاه باشید تا از مشکلات احتمالی جلوگیری کنید.
